<ion-content class="ion-padding">
  <ion-item-divider>
    <ion-label>
      Change password
    </ion-label>
  </ion-item-divider>

  <form #pform="ngForm" (ngSubmit)="write_password(pform)">
    <ion-item type="reset">
      <ion-label position="floating">
        Old password
      </ion-label>
      <ion-input
        #passwordfield
        ngModel
        required
        type="password"
        name="old_password"
        minlength="6"
        #oldpasswordCtrl="ngModel"
      ></ion-input>
    </ion-item>
    <ion-item
      *ngIf="!oldpasswordCtrl.valid && oldpasswordCtrl.touched"
      lines="none"
    >
      <ion-label>
        Should at least be 6 characters long.
      </ion-label>
    </ion-item>

    <ion-item type="reset">
      <ion-label position="floating">
        New password
      </ion-label>
      <ion-input
        #passwordfield
        ngModel
        required
        type="password"
        name="new_password"
        minlength="6"
        #newpasswordCtrl="ngModel"
      ></ion-input>
    </ion-item>
    <ion-item
      *ngIf="!newpasswordCtrl.valid && newpasswordCtrl.touched"
      lines="none"
    >
      <ion-label>
        Should at least be 6 characters long.
      </ion-label>
    </ion-item>

    <ion-item type="reset">
      <ion-label position="floating">
        New password
      </ion-label>
      <ion-input
        #passwordfield
        ngModel
        required
        type="password"
        name="new2_password"
        minlength="6"
        #new2passwordCtrl="ngModel"
      ></ion-input>
    </ion-item>
    <ion-item
      *ngIf="newpasswordCtrl.value != new2passwordCtrl.value && new2passwordCtrl.touched"
      lines="none"
    >
      <ion-label>
        New password should match.
      </ion-label>
    </ion-item>

    <ion-button ion-button slot="start" (click)="closePopover()">Cancel</ion-button>
    <ion-button ion-button type="submit" slot="end" >Submit</ion-button>
  </form>
</ion-content>
