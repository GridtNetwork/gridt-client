{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component, NgZone } from '@angular/core';\nimport { Platform } from '@ionic/angular';\nimport { Router, NavigationStart } from '@angular/router';\nimport { SplashScreen } from '@ionic-native/splash-screen/ngx';\nimport { Plugins, Capacitor } from '@capacitor/core';\nimport { AuthService } from './core/auth.service';\nimport { filter, flatMap } from 'rxjs/operators';\nvar AppComponent = /** @class */function () {\n  function AppComponent(platform, router, splashScreen, zone, auth) {\n    this.platform = platform;\n    this.router = router;\n    this.splashScreen = splashScreen;\n    this.zone = zone;\n    this.auth = auth;\n    this.appPages = [{\n      title: 'Home',\n      url: '/home',\n      icon: 'home'\n    }, {\n      title: 'Movements',\n      url: '/movements',\n      icon: 'fitness'\n    }, {\n      title: 'Profile',\n      url: '/profile',\n      icon: 'person'\n    }];\n    this.initializeApp();\n  }\n  AppComponent.prototype.initializeApp = function () {\n    var _this = this;\n    this.platform.ready().then(function () {\n      if (Capacitor.isPluginAvailable('SplashScreen')) {\n        _this.splashScreen.hide();\n      }\n    });\n  };\n  AppComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    // this.auth.isLoggedIn$ is a one-shot observable, which means that it is \n    // not updated when we navigate to another page. Therefore, we look at\n    // navigation events to track the change of this.auth.isLoggedIn$.\n    this.isLoggedIn$ = this.router.events.pipe(filter(function (event) {\n      return event instanceof NavigationStart;\n    }), flatMap(function () {\n      return _this.auth.isLoggedIn$;\n    }));\n    Plugins.App.addListener('appStateChange', this.checkAuthOnResume.bind(this));\n  };\n  AppComponent.prototype.onLogout = function () {};\n  AppComponent.prototype.ngOnDestroy = function () {};\n  AppComponent.prototype.checkAuthOnResume = function (state) {\n    var _this = this;\n    this.zone.run(function () {\n      if (state.isActive) {\n        _this.auth.isLoggedIn$.subscribe(function (loggedIn) {\n          if (!loggedIn) {\n            console.log('On resuming the app found user is now logged out. Redirecting to /login');\n            _this.router.navigate(['/login']);\n          }\n        });\n      }\n    });\n  };\n  var _a, _b, _c;\n  AppComponent = __decorate([Component({\n    selector: 'app-root',\n    templateUrl: 'app.component.html'\n  }), __metadata(\"design:paramtypes\", [typeof (_a = typeof Platform !== \"undefined\" && Platform) === \"function\" ? _a : Object, typeof (_b = typeof Router !== \"undefined\" && Router) === \"function\" ? _b : Object, typeof (_c = typeof SplashScreen !== \"undefined\" && SplashScreen) === \"function\" ? _c : Object, NgZone, AuthService])], AppComponent);\n  return AppComponent;\n}();\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}