{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport { Router } from '@angular/router';\nimport { LoadingController, AlertController } from '@ionic/angular';\nimport { AuthService } from '../../core/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"../../core/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction RegisterPage_ion_item_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 15)(1, \"ion-label\");\n    i0.ɵɵtext(2, \" Should be a valid username. \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterPage_ion_item_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 15)(1, \"ion-label\");\n    i0.ɵɵtext(2, \" Should be a valid email address. \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterPage_ion_item_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 15)(1, \"ion-label\");\n    i0.ɵɵtext(2, \" Should at least be 6 characters long. \");\n    i0.ɵɵelementEnd()();\n  }\n}\nvar RegisterPage = /** @class */function () {\n  function RegisterPage(router, loadingCtrl, alertCtrl, auth) {\n    this.router = router;\n    this.loadingCtrl = loadingCtrl;\n    this.alertCtrl = alertCtrl;\n    this.auth = auth;\n  }\n  RegisterPage.prototype.ngOnInit = function () {\n    this.showSafetyAlert();\n  };\n  RegisterPage.prototype.ngOnDestroy = function () {\n    this.alertCtrl.dismiss();\n  };\n  /*\n  * Creates warning for unique password\n  */\n  RegisterPage.prototype.showSafetyAlert = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var alert;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.alertCtrl.create({\n              header: \"Warning\",\n              subHeader: \"Password Safety\",\n              message: \"This app is in Alpha and therefore we cannot guarantee the safety of your data. Please keep this in mind when picking your password. We recommend you pick a password you do not use anywhere else.\",\n              buttons: [\"Accept\"],\n              backdropDismiss: false\n            })];\n          case 1:\n            alert = _a.sent();\n            return [4 /*yield*/, alert.present()];\n          case 2:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  /*\n   * Do API call and handle loading element.\n   */\n  RegisterPage.prototype.register = function (username, email, password) {\n    return __awaiter(this, void 0, void 0, function () {\n      var el;\n      var _this = this;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.loadingCtrl.create({\n              keyboardClose: true,\n              message: 'Signing you up...'\n            })];\n          case 1:\n            el = _a.sent();\n            this.auth.register$(username, email, password).subscribe(function () {\n              _this.router.navigateByUrl('/login');\n              el.dismiss();\n            }, function (error) {\n              _this.showAlert(error);\n              el.dismiss();\n            });\n            el.present();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  //Submits the registration info\n  RegisterPage.prototype.onSubmit = function (form) {\n    if (!form.valid) {\n      return;\n    }\n    var username = form.value.username;\n    var email = form.value.email;\n    var password = form.value.password;\n    this.register(username, email, password);\n  };\n  RegisterPage.prototype.showAlert = function (message) {\n    this.alertCtrl.create({\n      header: 'Signup failed',\n      message: message,\n      buttons: ['Okay']\n    }).then(function (alertEl) {\n      return alertEl.present();\n    });\n  };\n  RegisterPage.ɵfac = function RegisterPage_Factory(t) {\n    return new (t || RegisterPage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.LoadingController), i0.ɵɵdirectiveInject(i2.AlertController), i0.ɵɵdirectiveInject(i3.AuthService));\n  };\n  RegisterPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegisterPage,\n    selectors: [[\"app-register\"]],\n    decls: 38,\n    vars: 4,\n    consts: [[\"padding\", \"\"], [\"src\", \"/assets/gridt_logo.png\", 2, \"width\", \"200px\", \"height\", \"100px\"], [3, \"ngSubmit\"], [\"f\", \"ngForm\"], [\"size-sm\", \"6\", \"offset-sm\", \"3\"], [\"position\", \"floating\"], [\"type\", \"username\", \"ngModel\", \"\", \"name\", \"username\", \"required\", \"\"], [\"usernameCtrl\", \"ngModel\"], [\"lines\", \"none\", 4, \"ngIf\"], [\"type\", \"email\", \"ngModel\", \"\", \"name\", \"email\", \"required\", \"\", \"email\", \"\"], [\"emailCtrl\", \"ngModel\"], [\"type\", \"password\", \"ngModel\", \"\", \"name\", \"password\", \"required\", \"\", \"minlength\", \"6\"], [\"passwordCtrl\", \"ngModel\"], [\"type\", \"submit\", \"color\", \"primary\", \"expand\", \"block\", 3, \"disabled\"], [\"href\", \"login\"], [\"lines\", \"none\"]],\n    template: function RegisterPage_Template(rf, ctx) {\n      if (rf & 1) {\n        var _r7 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Register\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 0);\n        i0.ɵɵelement(5, \"ion-img\", 1);\n        i0.ɵɵelementStart(6, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function RegisterPage_Template_form_ngSubmit_6_listener() {\n          i0.ɵɵrestoreView(_r7);\n          var _r0 = i0.ɵɵreference(7);\n          return i0.ɵɵresetView(ctx.onSubmit(_r0));\n        });\n        i0.ɵɵelementStart(8, \"ion-grid\")(9, \"ion-row\")(10, \"ion-col\", 4)(11, \"ion-list\")(12, \"ion-item\")(13, \"ion-label\", 5);\n        i0.ɵɵtext(14, \"Username\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"ion-input\", 6, 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, RegisterPage_ion_item_17_Template, 3, 0, \"ion-item\", 8);\n        i0.ɵɵelementStart(18, \"ion-item\")(19, \"ion-label\", 5);\n        i0.ɵɵtext(20, \"E-Mail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"ion-input\", 9, 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(23, RegisterPage_ion_item_23_Template, 3, 0, \"ion-item\", 8);\n        i0.ɵɵelementStart(24, \"ion-item\")(25, \"ion-label\", 5);\n        i0.ɵɵtext(26, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"ion-input\", 11, 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(29, RegisterPage_ion_item_29_Template, 3, 0, \"ion-item\", 8);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(30, \"ion-row\")(31, \"ion-col\", 4)(32, \"ion-button\", 13);\n        i0.ɵɵtext(33, \" Register \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"p\");\n        i0.ɵɵtext(35, \"Already have an account? \");\n        i0.ɵɵelementStart(36, \"a\", 14);\n        i0.ɵɵtext(37, \"Log in\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        var _r0 = i0.ɵɵreference(7);\n        var _r1 = i0.ɵɵreference(16);\n        var _r3 = i0.ɵɵreference(22);\n        var _r5 = i0.ɵɵreference(28);\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"ngIf\", !_r1.valid && _r1.touched);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !_r3.valid && _r3.touched);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !_r5.valid && _r5.touched);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !_r0.valid);\n      }\n    },\n    dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MinLengthValidator, i5.EmailValidator, i5.NgModel, i5.NgForm, i2.IonButton, i2.IonCol, i2.IonContent, i2.IonGrid, i2.IonHeader, i2.IonImg, i2.IonInput, i2.IonItem, i2.IonLabel, i2.IonList, i2.IonRow, i2.IonTitle, i2.IonToolbar, i2.TextValueAccessor]\n  });\n  return RegisterPage;\n}();\nexport { RegisterPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}